<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex, notranslate">
    <title>Blog - Samridh Gaur</title>
    <style>
        body {
            max-width: 650px;
            margin: 40px auto;
            padding: 0 10px;
            font: 18px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            color: #444;
        }
        h1, h2, h3 {
            line-height: 1.2;
        }
        a {
            color: #07c;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .post-item {
            margin-bottom: 1.5em;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="index.html">home</a> |
            <a href="blog.html">blog</a> |
            <a href="index.html#contact">contact</a>
        </nav>
    </header>

    <h1>Blog</h1>
    <p>Insights, notes, and deep dives on building, tech, and strategy.</p>

    <h2>Latest Posts</h2>
    <div id="posts">Loading...</div>

    <hr>
    <footer>
        <p>@sxmridhx0 | v1.0.0</p>
    </footer>

    <script>
        // Fetch posts from Substack RSS (text only, no images)
        (function() {
            const RSS_URL = 'https://sxmridh.substack.com/feed';
            const container = document.getElementById('posts');
            const SOURCES = [
                'https://api.allorigins.win/raw?url=' + encodeURIComponent(RSS_URL),
                'https://r.jina.ai/' + RSS_URL
            ];

            async function fetchRSS() {
                for (const url of SOURCES) {
                    try {
                        const res = await fetch(url, { 
                            headers: { 'Accept': 'application/rss+xml,text/xml;q=0.9,*/*;q=0.8' } 
                        });
                        if (res.ok) return await res.text();
                    } catch (err) {
                        console.warn('Failed to fetch from', url);
                    }
                }
                throw new Error('Failed to fetch RSS');
            }

            function parseItems(xmlText) {
                const parser = new DOMParser();
                const doc = parser.parseFromString(xmlText, 'application/xml');
                const items = Array.from(doc.querySelectorAll('item')).slice(0, 10);
                return items.map(item => ({
                    title: item.querySelector('title')?.textContent?.trim() || 'Untitled',
                    link: item.querySelector('link')?.textContent?.trim() || '#'
                }));
            }

            fetchRSS()
                .then(xml => parseItems(xml))
                .then(posts => {
                    if (posts.length > 0) {
                        container.innerHTML = posts.map(p => 
                            `<div class="post-item"><a href="${p.link}" target="_blank" rel="noopener noreferrer">${p.title}</a></div>`
                        ).join('');
                    } else {
                        container.innerHTML = '<p>No posts found.</p>';
                    }
                })
                .catch(err => {
                    console.error(err);
                    container.innerHTML = '<p><a href="https://sxmridh.substack.com" target="_blank" rel="noopener noreferrer">Visit my Substack</a></p>';
                });
        })();
    </script>
</body>
</html>
